---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

// 1. Automatically fetch all verse files from your content folder
const allVerses = await getCollection('gita');

// 2. Determine the Base URL (empty locally, /vedic-site on GitHub)
const baseUrl = import.meta.env.BASE_URL;
---

<Layout title="Bhagavad Gita - Vedic Site">
	<h1>Welcome to Vedic Site</h1>
	<p>Explore the Bhagavad Gita verses below:</p>
	
	<ul>
		{allVerses.map(verse => (
			<li>
				<a href={`${baseUrl}/gita/${verse.slug}/`}>
					{verse.data.title || verse.slug.replace('-', ' ')}
				</a>
			</li>
		))}
	</ul>
</Layout>