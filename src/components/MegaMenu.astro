---
// src/components/MegaMenu.astro
// THE BLUEPRINT VISION: Tabbed Navigation for Deep Discovery
---

<div class="absolute top-full left-0 w-full bg-parchment-light border-b-4 border-canon-red shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 -mt-1 font-sans text-ink">
  
  <div class="max-w-7xl mx-auto flex min-h-[400px]">
    
    <div class="w-1/4 bg-parchment-deep/20 border-r border-border-subtle flex flex-col py-6">
      
      <button class="menu-tab active text-left px-8 py-4 hover:bg-white/50 transition-colors border-l-4 border-transparent hover:border-canon-red/30 focus:outline-none" data-target="panel-read">
        <span class="block font-bold uppercase tracking-widest text-xs text-canon-red">01. Read</span>
        <span class="block font-serif text-xl mt-1">Canonical Texts</span>
      </button>

      <button class="menu-tab text-left px-8 py-4 hover:bg-white/50 transition-colors border-l-4 border-transparent hover:border-canon-red/30 focus:outline-none" data-target="panel-themes">
        <span class="block font-bold uppercase tracking-widest text-xs text-ink-light">02. Explore</span>
        <span class="block font-serif text-xl mt-1">Vedic Themes</span>
      </button>

      <button class="menu-tab text-left px-8 py-4 hover:bg-white/50 transition-colors border-l-4 border-transparent hover:border-canon-red/30 focus:outline-none" data-target="panel-paths">
        <span class="block font-bold uppercase tracking-widest text-xs text-ink-light">03. Apply</span>
        <span class="block font-serif text-xl mt-1">Life Paths</span>
      </button>
      
    </div>

    <div class="w-3/4 bg-white/50 relative">
      
      <div id="panel-read" class="menu-panel absolute inset-0 p-8 grid grid-cols-3 gap-8">
        <div class="space-y-4 border-r border-border-subtle pr-8">
          <h4 class="font-sans text-[0.6rem] font-bold text-ink-light uppercase tracking-widest">Scripture Category</h4>
          <ul class="space-y-2">
            <li><a href="#" class="block font-serif text-lg text-canon-red font-medium">Smá¹›ti (Remembrance)</a></li>
            <li><a href="#" class="block font-serif text-lg text-ink hover:text-canon-red transition opacity-60">Åšruti (Hearing)</a></li>
            <li><a href="#" class="block font-serif text-lg text-ink hover:text-canon-red transition opacity-60">ItihÄsa (History)</a></li>
            <li><a href="#" class="block font-serif text-lg text-ink hover:text-canon-red transition opacity-60">PurÄá¹‡a (Ancient)</a></li>
          </ul>
        </div>
        
        <div class="col-span-2 space-y-6">
          <h4 class="font-sans text-[0.6rem] font-bold text-ink-light uppercase tracking-widest">Available Texts in Smá¹›ti</h4>
          <div class="grid grid-cols-2 gap-4">
             <a href="/vedic-site/gita" class="group block p-4 rounded border border-border-subtle hover:border-canon-red hover:shadow-sm transition bg-white">
               <span class="block font-serif text-lg font-bold group-hover:text-canon-red">Bhagavad GÄ«tÄ</span>
               <span class="block text-xs text-ink-light mt-1">The Essence of Upanishads</span>
             </a>
             <a href="#" class="group block p-4 rounded border border-border-subtle hover:border-canon-red hover:shadow-sm transition bg-white opacity-60 cursor-not-allowed">
               <span class="block font-serif text-lg font-bold">Manu Saá¹hitÄ</span>
               <span class="block text-xs text-ink-light mt-1">Codes of Dharma</span>
             </a>
          </div>
        </div>
      </div>

      <div id="panel-themes" class="menu-panel hidden absolute inset-0 p-8 overflow-y-auto">
        <h4 class="font-sans text-[0.6rem] font-bold text-ink-light uppercase tracking-widest mb-6">Explore by Theme</h4>
        <div class="grid grid-cols-3 gap-4">
          <a href="#" class="flex flex-col items-center p-6 border border-border-subtle rounded hover:border-canon-red hover:bg-white hover:shadow-md transition text-center group">
            <span class="text-3xl mb-3 grayscale group-hover:grayscale-0 transition">ğŸ¦</span>
            <span class="font-serif text-ink font-medium group-hover:text-canon-red">Leadership</span>
          </a>
          <a href="#" class="flex flex-col items-center p-6 border border-border-subtle rounded hover:border-canon-red hover:bg-white hover:shadow-md transition text-center group">
            <span class="text-3xl mb-3 grayscale group-hover:grayscale-0 transition">ğŸ¡</span>
            <span class="font-serif text-ink font-medium group-hover:text-canon-red">Family Life</span>
          </a>
          <a href="#" class="flex flex-col items-center p-6 border border-border-subtle rounded hover:border-canon-red hover:bg-white hover:shadow-md transition text-center group">
            <span class="text-3xl mb-3 grayscale group-hover:grayscale-0 transition">ğŸ§˜</span>
            <span class="font-serif text-ink font-medium group-hover:text-canon-red">Yoga & Mind</span>
          </a>
          <a href="#" class="flex flex-col items-center p-6 border border-border-subtle rounded hover:border-canon-red hover:bg-white hover:shadow-md transition text-center group">
            <span class="text-3xl mb-3 grayscale group-hover:grayscale-0 transition">âš–ï¸</span>
            <span class="font-serif text-ink font-medium group-hover:text-canon-red">Dharma</span>
          </a>
          <a href="#" class="flex flex-col items-center p-6 border border-border-subtle rounded hover:border-canon-red hover:bg-white hover:shadow-md transition text-center group">
            <span class="text-3xl mb-3 grayscale group-hover:grayscale-0 transition">ğŸŒ¿</span>
            <span class="font-serif text-ink font-medium group-hover:text-canon-red">Health</span>
          </a>
           <a href="#" class="flex flex-col items-center p-6 border border-border-subtle rounded hover:border-canon-red hover:bg-white hover:shadow-md transition text-center group">
            <span class="text-3xl mb-3 grayscale group-hover:grayscale-0 transition">ğŸŒ</span>
            <span class="font-serif text-ink font-medium group-hover:text-canon-red">Ecology</span>
          </a>
        </div>
      </div>

      <div id="panel-paths" class="menu-panel hidden absolute inset-0 p-8">
        <div class="grid grid-cols-2 gap-12">
          <div>
            <h4 class="font-sans text-[0.6rem] font-bold text-ink-light uppercase tracking-widest mb-6">By Life Stage</h4>
            <ul class="space-y-4">
              <li><a href="#" class="flex items-center font-serif text-lg text-ink hover:text-canon-red transition"><span class="w-2 h-2 bg-ink-light rounded-full mr-3"></span>Student (BrahmacÄrÄ«)</a></li>
              <li><a href="/vedic-site/departments/relationships" class="flex items-center font-serif text-lg text-ink hover:text-canon-red transition"><span class="w-2 h-2 bg-canon-red rounded-full mr-3"></span>Householder (Gá¹›hastha)</a></li>
              <li><a href="#" class="flex items-center font-serif text-lg text-ink hover:text-canon-red transition"><span class="w-2 h-2 bg-ink-light rounded-full mr-3"></span>Retired (VÄnaprastha)</a></li>
            </ul>
          </div>
          <div>
             <h4 class="font-sans text-[0.6rem] font-bold text-ink-light uppercase tracking-widest mb-6">By Goal</h4>
             <ul class="space-y-4">
              <li><a href="#" class="font-serif text-lg text-ink hover:text-canon-red transition">For Managers & Leaders</a></li>
              <li><a href="#" class="font-serif text-lg text-ink hover:text-canon-red transition">For Spiritual Seekers</a></li>
              <li><a href="#" class="font-serif text-lg text-ink hover:text-canon-red transition">For Academic Researchers</a></li>
            </ul>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
  // Simple Vanilla JS for Tab Switching
  const tabs = document.querySelectorAll('.menu-tab');
  const panels = document.querySelectorAll('.menu-panel');

  tabs.forEach(tab => {
    tab.addEventListener('mouseenter', () => {
      // 1. Deactivate all
      tabs.forEach(t => {
        t.classList.remove('active', 'border-l-4', 'border-canon-red', 'bg-white');
        const label = t.querySelector('span:first-child');
        if(label) label.classList.replace('text-canon-red', 'text-ink-light');
      });
      panels.forEach(p => p.classList.add('hidden'));

      // 2. Activate current
      tab.classList.add('active', 'border-l-4', 'border-canon-red', 'bg-white');
      const activeLabel = tab.querySelector('span:first-child');
      if(activeLabel) activeLabel.classList.replace('text-ink-light', 'text-canon-red');
      
      const targetId = tab.getAttribute('data-target');
      document.getElementById(targetId).classList.remove('hidden');
    });
  });
</script>

<style>
  /* Custom Active State for Tabs */
  .menu-tab.active {
    background-color: white;
    border-left-color: #8B1E1E; /* Canon Red */
  }
</style>